<?xml version="1.0" ?><BEAKER_TEST><test_id>25815367</test_id><package>thermostat1</package><pkgnotinstalled>thermostat1</pkgnotinstalled><beakerlib_rpm>beakerlib-1.9-3.el7 </beakerlib_rpm><beakerlib_redhat_rpm>beakerlib-redhat-1-15.el7 </beakerlib_redhat_rpm><starttime>2014-11-07 08:35:07 EST</starttime><endtime>2014-11-07 08:36:18 EST</endtime><testname>/CoreOS/thermostat1/Sanity/smoke</testname><release>Red Head Enterprise Limux X.Y (Moo)</release><hostname>some-p8-lp7-hostname.com</hostname><arch>zx_spectrum</arch><hw_cpu>0 x unknown</hw_cpu><hw_ram>17846 MB</hw_ram><hw_hdd>290.8 GB</hw_hdd><purpose>PURPOSE of /CoreOS/thermostat1/Sanity/smoke
Description: runs simple smoke test
Author: Joe the Tester &lt;jttester@redhat.com&gt;

Basic sanity test:
1) run thermostat service
2) ping agent

No other service can run, no changes to default configuration are expected

list-vms and ping are done via external scripts to avoid bash escaping
</purpose><log><phase endtime="2014-11-07 08:35:08 EST" name="Setup" result="WARN" score="1" starttime="2014-11-07 08:35:07 EST" type="WARN"><pkgnotinstalled>thermostat1</pkgnotinstalled><test message="Checking for the presence of thermostat1 rpm ">FAIL</test><test command="TmpDir=$(mktemp -d)" message="Creating tmp directory (Expected 0, got 0)">PASS</test><test command="cp t-list_vms.sh t-ping.sh /tmp/tmp.MgrdBKMjZZ" message="Command 'cp t-list_vms.sh t-ping.sh /tmp/tmp.MgrdBKMjZZ' (Expected 0, got 0)">PASS</test><test command="pushd /tmp/tmp.MgrdBKMjZZ" message="Command 'pushd /tmp/tmp.MgrdBKMjZZ' (Expected 0, got 0)">PASS</test></phase><phase endtime="2014-11-07 08:36:16 EST" name="Test" result="FAIL" score="5" starttime="2014-11-07 08:35:09 EST" type="FAIL"><pkgnotinstalled>thermostat1</pkgnotinstalled><test command="thermostat --version" message="Command 'thermostat --version' (Expected 0, got 127)">FAIL</test><message severity="LOG">Runnning while ! lsof -i -P | grep 12000; do sleep 4; done , with 60 seconds timeout</message><message severity="LOG">Command is still running, I am killing it with KILL</message><test command="rlWatchdog &quot;while ! lsof -i -P | grep 12000; do sleep 4; done &quot; 60" message="Command 'rlWatchdog &quot;while ! lsof -i -P | grep 12000; do sleep 4; done &quot; 60' (Expected 0, got 1)">FAIL</test><message severity="LOG">Runnning bash t-list_vms.sh, with 60 seconds timeout</message><message severity="LOG">Command ended itself, I am not killing it.</message><test command="rlWatchdog 'bash t-list_vms.sh' 60" message="Command 'rlWatchdog 'bash t-list_vms.sh' 60' (Expected 0, got 0)">PASS</test><message severity="LOG">Runnning bash t-ping.sh , with 60 seconds timeout</message><message severity="LOG">Command ended itself, I am not killing it.</message><test command="rlWatchdog 'bash t-ping.sh ' 60" message="Command 'rlWatchdog 'bash t-ping.sh ' 60' (Expected 0, got 0)">PASS</test><test command="grep 'Queuing ping' t-ping.log" message="Command 'grep 'Queuing ping' t-ping.log' (Expected 0, got 1)">FAIL</test><test command="grep 'Response received' t-ping.log" message="Command 'grep 'Response received' t-ping.log' (Expected 0, got 1)">FAIL</test><test command="grep 'SEVERE' t-service.log" message="Command 'grep 'SEVERE' t-service.log' (Expected 1, got 1)">PASS</test><test command="kill " message="Command 'kill ' (Expected 0, got 1)">FAIL</test></phase><phase endtime="2014-11-07 08:36:18 EST" name="Cleanup" result="PASS" score="0" starttime="2014-11-07 08:36:18 EST" type="WARN"><pkgnotinstalled>thermostat1</pkgnotinstalled><message severity="LOG">Bundling logs</message><message severity="INFO">rlBundleLogs: Adding 't-list_vms.log' as 't-list_vms.log'</message><message severity="INFO">rlBundleLogs: Adding 't-ping.log' as 't-ping.log'</message><message severity="INFO">rlBundleLogs: Adding 't-service.log' as 't-service.log'</message><message severity="INFO">Sending /tmp/LOGS-796067-1658233-25815367.tar.gz as tmp-LOGS-796067-1658233-25815367.tar.gz</message><test command="popd" message="Command 'popd' (Expected 0, got 0)">PASS</test><test command="rm -r /tmp/tmp.MgrdBKMjZZ" message="Removing tmp directory (Expected 0, got 0)">PASS</test></phase></log></BEAKER_TEST>
