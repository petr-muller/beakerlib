<?xml version="1.0" ?><BEAKER_TEST><test_id>25815358</test_id><package>nginx</package><pkgnotinstalled>nginx</pkgnotinstalled><beakerlib_rpm>beakerlib-1.9-3.el7 </beakerlib_rpm><beakerlib_redhat_rpm>beakerlib-redhat-1-15.el7 </beakerlib_redhat_rpm><starttime>2014-11-07 08:32:02 EST</starttime><endtime>2014-11-07 08:32:15 EST</endtime><testname>/CoreOS/nginx/Sanity/nginx-sanity-test</testname><release>Red Head Enterprise Limux X.Y (Moo)</release><hostname>some-p8-lp7-hostname.com</hostname><arch>zx_spectrum</arch><hw_cpu>0 x unknown</hw_cpu><hw_ram>17846 MB</hw_ram><hw_hdd>290.8 GB</hw_hdd><purpose>PURPOSE of /CoreOS/nginx/Sanity/nginx-sanity-test
Description: Sanity test for nginx
Author: Joe the Tester &lt;jttester@redhat.com&gt;
</purpose><log><phase endtime="2014-11-07 08:32:06 EST" name="Setup" result="WARN" score="13" starttime="2014-11-07 08:32:02 EST" type="WARN"><pkgnotinstalled>nginx</pkgnotinstalled><test message="Checking for the presence of nginx rpm ">FAIL</test><message severity="INFO">rlImport: Found 'nginx/nginx' in /mnt/tests</message><message severity="INFO">rlImport: Will try to import nginx/nginx from /somewhere/nginx/Library/nginx/lib.sh</message><test command="rpm -q nginx" message="checking nginx rpm (Expected 0, got 1)">FAIL</test><test command="nginxROOTDIR_tmp=$(grep '^[ \t]*root[ \t]*/' /etc/nginx/nginx.conf|head -1|        awk '{print $2}'|sed -e 's/&quot;//g;s/;//')" message="setup nginxROOTDIR (Expected 0, got 0)">PASS</test><test message="Library is unable to get document rootdir from configuration file: /etc/nginx/nginx.conf ">FAIL</test><test command="nginxROOTPREFIX=$(echo /dev/null|sed -e 's/\/usr.*//')" message="parsing prefix from nginxROOTDIR (Expected 0, got 0)">PASS</test><message severity="INFO">COLLECTIONS=</message><message severity="INFO">nginxCOLLECTION=0</message><message severity="INFO">nginxCOLLECTION_NAME=</message><message severity="INFO">nginxHTTPD=nginx</message><message severity="INFO">nginxROOTDIR=/dev/null</message><message severity="INFO">nginxROOTPREFIX=/dev/null</message><message severity="INFO">nginxCONFDIR=/etc/nginx</message><message severity="INFO">nginxLOGDIR=/var/log/nginx</message><test message="File /dev/null should exist ">PASS</test><pkgnotinstalled>nginx</pkgnotinstalled><test message="Checking for the presence of nginx rpm ">FAIL</test><message severity="ERROR">rlImport: Import of library nginx/nginx was not successful (callback failed)</message><test command="rlImport nginx/nginx" message="Command 'rlImport nginx/nginx' (Expected 0, got 1)">FAIL</test><message severity="ERROR">nginx: command not found</message><test message="Binary 'nginx' should belong to: nginx ">FAIL</test><test message="File /etc/nginx should exist ">FAIL</test><test message="File /var/log/nginx should exist ">FAIL</test><test command="mkdir /dev/null/rhts-nginx-root" message="Command 'mkdir /dev/null/rhts-nginx-root' (Expected 0, got 1)">FAIL</test><test command="echo this is the index &gt; /dev/null/rhts-nginx-root/index.html" message="Command 'echo this is the index &gt; /dev/null/rhts-nginx-root/index.html' (Expected 0, got 1)">FAIL</test><test command="echo '&lt;?php echo phpinfo();' &gt; /dev/null/rhts-nginx-root/info.php" message="Command 'echo '&lt;?php echo phpinfo();' &gt; /dev/null/rhts-nginx-root/info.php' (Expected 0, got 1)">FAIL</test><test command="cp nginx.conf /etc/nginx/conf.d/rhts-nginx-sanity.conf" message="Command 'cp nginx.conf /etc/nginx/conf.d/rhts-nginx-sanity.conf' (Expected 0, got 1)">FAIL</test><test command="sed -i 's|ROOTDIR|/dev/null|' /etc/nginx/conf.d/rhts-nginx-sanity.conf" message="Command 'sed -i 's|ROOTDIR|/dev/null|' /etc/nginx/conf.d/rhts-nginx-sanity.conf' (Expected 0, got 2)">FAIL</test><test command="TmpDir=$(mktemp -d)" message="Creating tmp directory (Expected 0, got 0)">PASS</test><test command="pushd /tmp/tmp.74YTzxPKrV" message="Command 'pushd /tmp/tmp.74YTzxPKrV' (Expected 0, got 0)">PASS</test></phase><phase endtime="2014-11-07 08:32:13 EST" name="Test" result="FAIL" score="9" starttime="2014-11-07 08:32:07 EST" type="FAIL"><pkgnotinstalled>nginx</pkgnotinstalled><message severity="ERROR">rlServiceStart: Starting service nginx failed</message><message severity="ERROR">Status of the failed service:</message><message severity="LOG">  Redirecting to /bin/systemctl status  nginx.service</message><message severity="LOG">  nginx.service</message><message severity="LOG">  Loaded: not-found (Reason: No such file or directory)</message><message severity="LOG">  Active: inactive (dead)</message><message severity="LOG">  </message><test command="rlServiceStart nginx" message="Command 'rlServiceStart nginx' (Expected 0, got 1)">FAIL</test><test command="sleep 2" message="Command 'sleep 2' (Expected 0, got 0)">PASS</test><test command="curl http://127.0.0.1:81/ &gt; output.html" message="Command 'curl http://127.0.0.1:81/ &gt; output.html' (Expected 0, got 7)">FAIL</test><test message="rlAssertNotDiffer: file /dev/null/rhts-nginx-root/index.html was not found ">FAIL</test><test command="curl http://127.0.0.1:81//rp/ &gt; output2.html" message="Command 'curl http://127.0.0.1:81//rp/ &gt; output2.html' (Expected 0, got 7)">FAIL</test><test message="rlAssertNotDiffer: file /dev/null/rhts-nginx-root/index.html was not found ">FAIL</test><test message="File /var/log/nginx/access.log should exist ">FAIL</test><test message="File /var/log/nginx/error.log should exist ">FAIL</test><test command="ab -c 100 -n 10000 http://127.0.0.1:81/" message="Command 'ab -c 100 -n 10000 http://127.0.0.1:81/' (Expected 0, got 111)">FAIL</test><test command="ab -c 100 -n 10000 http://127.0.0.1:81/rp/" message="Command 'ab -c 100 -n 10000 http://127.0.0.1:81/rp/' (Expected 0, got 111)">FAIL</test><test command="rlServiceStop nginx" message="Command 'rlServiceStop nginx' (Expected 0, got 0)">PASS</test><test command="sleep 2" message="Command 'sleep 2' (Expected 0, got 0)">PASS</test></phase><phase endtime="2014-11-07 08:32:15 EST" name="Cleanup" result="PASS" score="0" starttime="2014-11-07 08:32:15 EST" type="WARN"><pkgnotinstalled>nginx</pkgnotinstalled><test command="popd" message="Command 'popd' (Expected 0, got 0)">PASS</test><test command="rm -r /tmp/tmp.74YTzxPKrV" message="Removing tmp directory (Expected 0, got 0)">PASS</test><test command="rm -rf /dev/null/rhts-nginx-root" message="Command 'rm -rf /dev/null/rhts-nginx-root' (Expected 0, got 0)">PASS</test><test command="rm -f /etc/nginx/conf.d/rhts-nginx-sanity.conf" message="Command 'rm -f /etc/nginx/conf.d/rhts-nginx-sanity.conf' (Expected 0, got 0)">PASS</test></phase></log></BEAKER_TEST>
