<?xml version="1.0" ?><BEAKER_TEST><test_id>25815363</test_id><package>nginx</package><pkgnotinstalled>nginx</pkgnotinstalled><beakerlib_rpm>beakerlib-1.9-3.el7 </beakerlib_rpm><beakerlib_redhat_rpm>beakerlib-redhat-1-15.el7 </beakerlib_redhat_rpm><starttime>2014-11-07 08:33:56 EST</starttime><endtime>2014-11-07 08:34:03 EST</endtime><testname>/CoreOS/nginx/Sanity/daemon-selinux-context</testname><release>Red Head Enterprise Limux X.Y (Moo)</release><hostname>some-p8-lp7-hostname.com</hostname><arch>zx_spectrum</arch><hw_cpu>0 x unknown</hw_cpu><hw_ram>17846 MB</hw_ram><hw_hdd>290.8 GB</hw_hdd><purpose>PURPOSE of /CoreOS/nginx/Sanity/daemon-selinux-context
Description: test selinux context of all squid's processes
Every process with name &quot;nginx&quot; is checked.
Parametrization takes nginx version from COLLECTIONS variable
and if COLLECTIONS isn't set, system nginx is expected:
(service will be for example: nginx14-nginx or just nginx)

Author: Joe the Tester &lt;jttester@redhat.com&gt;
</purpose><log><phase endtime="2014-11-07 08:34:00 EST" name="Setup" result="WARN" score="6" starttime="2014-11-07 08:33:56 EST" type="WARN"><pkgnotinstalled>nginx</pkgnotinstalled><test message="Checking for the presence of nginx rpm ">FAIL</test><message severity="INFO">rlImport: Found 'nginx/nginx' in /mnt/tests</message><message severity="INFO">rlImport: Will try to import nginx/nginx from /somewhere/nginx/Library/nginx/lib.sh</message><test command="rpm -q nginx" message="checking nginx rpm (Expected 0, got 1)">FAIL</test><test command="nginxROOTDIR_tmp=$(grep '^[ \t]*root[ \t]*/' /etc/nginx/nginx.conf|head -1|        awk '{print $2}'|sed -e 's/&quot;//g;s/;//')" message="setup nginxROOTDIR (Expected 0, got 0)">PASS</test><test message="Library is unable to get document rootdir from configuration file: /etc/nginx/nginx.conf ">FAIL</test><test command="nginxROOTPREFIX=$(echo /dev/null|sed -e 's/\/usr.*//')" message="parsing prefix from nginxROOTDIR (Expected 0, got 0)">PASS</test><message severity="INFO">COLLECTIONS=</message><message severity="INFO">nginxCOLLECTION=0</message><message severity="INFO">nginxCOLLECTION_NAME=</message><message severity="INFO">nginxHTTPD=nginx</message><message severity="INFO">nginxROOTDIR=/dev/null</message><message severity="INFO">nginxROOTPREFIX=/dev/null</message><message severity="INFO">nginxCONFDIR=/etc/nginx</message><message severity="INFO">nginxLOGDIR=/var/log/nginx</message><test message="File /dev/null should exist ">PASS</test><pkgnotinstalled>nginx</pkgnotinstalled><test message="Checking for the presence of nginx rpm ">FAIL</test><message severity="ERROR">rlImport: Import of library nginx/nginx was not successful (callback failed)</message><test command="rlImport nginx/nginx" message="Command 'rlImport nginx/nginx' (Expected 0, got 1)">FAIL</test><test command="TmpDir=$(mktemp -d)" message="Creating tmp directory (Expected 0, got 0)">PASS</test><test command="pushd /tmp/tmp.Fhzj5y9EYT" message="Command 'pushd /tmp/tmp.Fhzj5y9EYT' (Expected 0, got 0)">PASS</test><message severity="ERROR">rlServiceStart: Starting service nginx failed</message><message severity="ERROR">Status of the failed service:</message><message severity="LOG">  Redirecting to /bin/systemctl status  nginx.service</message><message severity="LOG">  nginx.service</message><message severity="LOG">  Loaded: not-found (Reason: No such file or directory)</message><message severity="LOG">  Active: inactive (dead)</message><message severity="LOG">  </message><test command="rlServiceStart nginx" message="Command 'rlServiceStart nginx' (Expected 0, got 1)">FAIL</test></phase><phase endtime="2014-11-07 08:34:02 EST" name="Test" result="FAIL" score="1" starttime="2014-11-07 08:34:01 EST" type="FAIL"><pkgnotinstalled>nginx</pkgnotinstalled><test command="nginx_pids=$(ps axo pid,comm|grep '\bnginx\b'|awk '{print $1}')" message="detecting nginx's processes (Expected 0, got 0)">PASS</test><test command=" [ -n &quot;&quot; ] " message="nginx has at least one running process (Expected 0, got 1)">FAIL</test></phase><phase endtime="2014-11-07 08:34:03 EST" name="Cleanup" result="PASS" score="0" starttime="2014-11-07 08:34:03 EST" type="WARN"><pkgnotinstalled>nginx</pkgnotinstalled><test command="rlServiceStop nginx" message="Command 'rlServiceStop nginx' (Expected 0, got 0)">PASS</test><test command="popd" message="Command 'popd' (Expected 0, got 0)">PASS</test><test command="rm -r /tmp/tmp.Fhzj5y9EYT" message="Removing tmp directory (Expected 0, got 0)">PASS</test></phase></log></BEAKER_TEST>
